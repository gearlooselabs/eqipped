<script>
  //    this snippet changes the option colour

  $(document).ready(function () {
    $('#bType').css('color', 'gray');
    $('#bType').change(function () {
      var current = $('#select').val();
      if (current != 'null') {
        $('#select').css('color', 'black');
      } else {
        $('#select').css('color', 'gray');
      }
    });
  });

</script>


<div class="min-h-full  " style="background-color: #F2F3F4;">
  <div class="form-border">
    <div style="min-width: 50%">
      <div>
        <h2 class="m-10 text-center text-3xl font-extrabold text-gray-900 ">
          KYC Process
        </h2>
      </div>
      <div id="multi-step-form-container">

        <% if(messages.error) { %>
          <span class="text-red-600 mt-1 text-center font-medium">
            <%= messages.error%>
          </span>
        <% } %>

        
        <% if(user.isuploded!='Yes' ) { %>

        <form action="/complete-your-profile" method="post" enctype="multipart/form-data">

          <section class="form-step" style="background-color: white;">
            <h2 class="font-normal">Fill details carefully</h2>


            <div class="space-x-0 lg:flex lg:space-x-4 mt-2">
              <div class="w-full mt-4">
                <label for="bType" class="block mb- text-sm font-semibold text-gray-500">
                  Register as</label>
                <select id="bType" required name="registerAs"
                  class="appearance-none rounded-none relative block w-full px-3 py-2 border placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:z-10 sm:text-sm">
                  <option style="color:gray" disabled selected hidden>Click to select â–½</option>
                  <option value="School">School / Junior College</option>
                  <option value="college">College / University</option>
                  <option value="Healthcare">Healthcare</option>
                  <option value="vendor">Vendor / Distributer</option>
                </select>
              </div>
            </div>
            <div class="w-full  mt-4" id="GST" style="display:none;">
              <label for="Gst" class="sr-onl block mb- text-sm font-semibold text-gray-500">GST Number</label>
              <input id="GST-Input" name="gst" type="text"
                class="appearance-none rounded-none relative block w-full px-3 py-2 border placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:z-10 sm:text-sm"
                placeholder="GST Number">
            </div>
            <div class="w-full  mt-4" id="CIN" style="display:none;">
              <label for="Cin" class="sr-onl block mb- text-sm font-semibold text-gray-500">CIN</label>
              <input id="CIN-Input" name="cin" type="number" required
                class="appearance-none rounded-none relative block w-full px-3 py-2 border placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:z-10 sm:text-sm"
                placeholder="CIN Number">
            </div>
            <div class="w-full  mt-4" id="PAN" style="display:none;">
              <label for="Pan" class="sr-onl block mb- text-sm font-semibold text-gray-500">PAN</label>
              <input id="PAN-Input" name="pan" type="text" required
                class="appearance-none rounded-none relative block w-full px-3 py-2 border placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:z-10 sm:text-sm"
                placeholder="PAN Number">
            </div>
            <div class="w-full  mt-4" id="UDISE" style="display:none;">
              <label for="Udise" class="sr-onl block mb- text-sm font-semibold text-gray-500">U-DISE</label>
              <input id="UDISE-Input" name="udise" type="number"
                class="appearance-none rounded-none relative block w-full px-3 py-2 border placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:z-10 sm:text-sm"
                placeholder="U-DISE Number">
            </div>
            <div class="w-full  mt-4" id="MAN" style="display:none;">
              <label for="Man" class="sr-onl block mb- text-sm font-semibold text-gray-500">MAN</label>
              <input id="MAN-Input" name="man" type="text"
                class="appearance-none rounded-none relative block w-full px-3 py-2 border placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:z-10 sm:text-sm"
                placeholder="MAN Number">
            </div>

              <div class="rounded-md shadow-sm -space-y-px">

                    <div class="w-full  mt-4" id="PDF" style="display:none;">
                      <label for="PDF-Input" class="sr-onl block mb- text-sm font-semibold text-gray-500">Upload all
                        document in PDF form</label>
                      <input id="PDF-Input" type="file" name="avatar" multiple
                        class="appearance-none rounded-none relative block w-full px-3 py-2 border placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:z-10 sm:text-sm"
                        required>
                    </div>

              </div>


            <div class="mt-3 space-x-0 lg:flex lg:space-x-4">
              <button type="submit" value="submit" class="button btn-navigate-form-step group relative w-full flex justify-center py-2 px-4  border border-transparent text-sm font-medium rounded-md text-white btn-primary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Submit</button>
            </div>

          </section>

        </form>
        <% } %>

            <% if( user.isuploded == 'Yes' && user.isverified == 'No' ) { %>

              <div class="text-center py-4 lg:px-4">
                <div class="p-2 bg-indigo-800 items-center text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex" role="alert">
                  <svg class="fill-current opacity-75 h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M12.95 10.707l.707-.707L8 4.343 6.586 5.757 10.828 10l-4.242 4.243L8 15.657l4.95-4.95z"/></svg>
                  <span class="font-semibold mr-2 text-left flex-auto">Verification Pending</span>
                  <span class="flex rounded-full bg-indigo-500 uppercase px-2 py-1 text-xs font-bold mr-3">Our team contact you soon, Kindly wait for 24 to 48hrs.</span>
                </div>
              </div>

              <br><br><br>

        <div class="flex justify-center">
              <a class="link" href="/view/doc/<%= user.fname%>/<%= user.institutionName%>"><div target="_blank" class="inline-block cursor-pointer btn-primary px-3 py-1 rounded-full text-white">View Uploaded Documents</div></a>
        </div>

            <% } %>

            
            <% if( user.isuploded == 'Yes' && user.isverified == 'Yes' ) { %>

            <div class="mx-auto max-w-sm bg-white rounded-lg border border-gray-200 shadow-md dark:bg-gray-800 dark:border-gray-700">
                
                <div class="flex flex-col items-center pb-10">
                    <img src="/img/Verified-rafiki.svg" alt="VerificationImg" srcset="">
                    <h5 class="mb-1 text-xl font-medium text-gray-900 dark:text-white">Account Verified</h5>
                    <span class="text-sm text-gray-500 dark:text-gray-400">You Are Now Ready to Sell/Buy Items</span>
                    <!-- <div class="flex mt-4 space-x-3 lg:mt-6">
                        <a href="#" class="inline-flex items-center py-2 px-4 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Add friend</a>
                      </div> -->
                </div>
            </div>

              <% } %>



      </div>
    </div>
  </div>
</div>

<script>
  $('#bType').on('change', function () {
    var selection = $(this).val();
    switch (selection) {

      case "School":

        $("#UDISE").show()
        $("#UDISE-Input").attr("placeholder", "U-DISE Number");
        document.querySelector('#UDISE-Input').required = true;
        $("#CIN").show()
        $("#PAN").show()
        $("#GST").show()
        $("#GST-Input").attr("placeholder", "GST Number ( Optional )");
        document.querySelector('#GST-Input').required = false;


        $("#MAN").hide()
        document.querySelector('#MAN-Input').required = false;
    
       
        $("#PDF").show()

        break;
      case "college":

        $("#UDISE").show()
        $("#UDISE-Input").attr("placeholder", "U-DISE Number");
        document.querySelector('#UDISE-Input').required = true;
        $("#CIN").show()
        $("#PAN").show()
        $("#GST").show()
        $("#GST-Input").attr("placeholder", "GST Number ( Optional )");
        document.querySelector('#GST-Input').required = false;
        $("#MAN").show()
        $("#MAN-Input").attr("placeholder", "MAN Number ( Required for Medical Institutes )");
        document.querySelector('#MAN-Input').required = false;


        $("#PDF").show()


        break;
      case "Healthcare":
      
        $("#CIN").show()
        $("#PAN").show()
        $("#GST").show()
        $("#GST-Input").attr("placeholder", "GST Number").attr("required", "true");
        $("#MAN").show()
        $("#MAN-Input").attr("placeholder", "MAN Number")
        document.querySelector('#MAN-Input').required = true;


        $("#UDISE").hide()
        document.querySelector('#UDISE-Input').required = false ;

        
        $("#PDF").show()


        break;
      case "vendor":
        
        $("#CIN").show()
        $("#PAN").show()
        $("#GST").show()
        $("#GST-Input").attr("placeholder", "GST Number lala");
       
        $("#UDISE").hide()
        document.querySelector('#UDISE-Input').required = false ;


        $("#MAN").hide()
        document.querySelector('#MAN-Input').required = false;
       

        $("#PDF").show()


        break;

    }
  });
</script>